webpackJsonp([1],{"667q":function(t,e){},Ari9:function(t,e){},DzBd:function(t,e){},N69S:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=a("7+uW"),s={data:function(){return{activeIndex:"/allList"}},created:function(){if(console.log(this.$router.history.current.path),sessionStorage.getItem("username"))this.activeIndex=this.$router.history.current.path;else{var t="http://"+location.host+"/#/login";window.open(t,"_self")}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",{attrs:{id:"app"}},[a("el-header",[a("img",{attrs:{src:"/static/img/icon-144.png"}}),t._v(" "),a("span",[t._v("MusicFM Operations Management System")])]),t._v(" "),a("el-container",[a("el-aside",{attrs:{width:"200px"}},[a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":t.activeIndex,router:!0,"unique-opened":!0}},[a("el-submenu",{attrs:{index:"songList"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-menu"}),t._v("歌单管理")]),t._v(" "),a("el-menu-item",{attrs:{index:"/allList"}},[t._v("全部歌单")]),t._v(" "),a("el-menu-item",{attrs:{index:"/HotSinger"}},[t._v("人气歌单")]),t._v(" "),a("el-menu-item",{attrs:{index:"/ranking"}},[t._v("排行榜")]),t._v(" "),a("el-menu-item",{attrs:{index:"/recommend"}},[t._v("每日推荐")]),t._v(" "),a("el-menu-item",{attrs:{index:"/latest"}},[t._v("最新歌曲")]),t._v(" "),a("el-menu-item",{attrs:{index:"/mfm_track"}},[t._v("全部歌曲")]),t._v(" "),a("el-menu-item",{attrs:{index:"/search_keywords"}},[t._v("搜索热词")])],2),t._v(" "),a("el-submenu",{attrs:{index:"publish"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-service"}),t._v("发布管理")]),t._v(" "),a("el-menu-item",{attrs:{index:"/app_info"}},[t._v("包更新管理")])],2)],1)],1),t._v(" "),a("el-main",[a("router-view")],1)],1)],1)},staticRenderFns:[]},n=a("VU/8")(s,i,!1,function(t){a("Ari9")},null,null).exports,o=a("/ocq"),r=a("mtWM"),c=a.n(r).a.create({baseURL:"http://"+location.hostname+":4000",timeout:2e4});c.interceptors.response.use(function(t){return t.status,t.data},function(t){return console.error("http请求失败",t),t}),c.defaults.headers.post["Content-Type"]="application/json";var u=c;a("X2Oc");var g={data:function(){return{songList:[],dialogVisible:!1,dialogImg:"",addVisible:!1,loading2:!1,visible2:!1,currentPage:1,id:"",total:0,idolname:"",Stitle:"",Sstatus:"",title:"",Stag:"",Sdesc:"",Snums:"",hosts:"http://opt.groupy.cn/api/fileupload",Status:1,idolType:"idol",song:{id:"",title:"",channel_title:"",artwork_url:"",artwork_big_url:""}}},methods:{formatTime:function(t){if(t){var e=parseInt(t),a=0,l=0;e>60&&(a=parseInt(e/60),e=parseInt(e%60),a>60&&(l=parseInt(a/60),a=parseInt(a%60)));var s=""+parseInt(e);return s=a>0?parseInt(a)+":"+s:"00:"+s,l>0&&(s=parseInt(l)+":"+s),s}return"0"},handleImg:function(t,e){this.song.img=t.url},tableRowClassName:function(t){var e=t.row;t.index;return"0"==e.status?"del-row":""},showBigImg:function(t){this.dialogImg=t,this.dialogVisible=!0},editStatus:function(t,e){this.addVisible=!0,this.Status=t,this.id=e,this.title=1==t?"你确定要上线ID为"+e+"这个歌吗？？":"你确定要下线ID为"+e+"这个歌吗？？"},pushStatus:function(){var t=this;t.loading2=!0,u.get("/api/mfm_track/edit_status",{params:{id:t.id,status:t.Status}}).then(function(e){t.loading2=!1,e.success?(t.handleCurrentChange(t.currentPage),t.addVisible=!1,0==t.Status?t.$message({message:"😭，你再也不会在app里面看到这个歌了！",type:"success"}):t.$message({message:"😃，你很快就可以在app里面看到这个歌了！",type:"success"})):t.$message.error("服务器或者网络错误"+e)}).catch(function(e){t.loading2=!1,t.$message.error("服务器或者网络错误"+res)})},editSong:function(t){this.visible2=!0,this.song=t?{id:t.track_id,title:t.title,channel_title:t.channel_title,artwork_url:t.artwork_url,artwork_big_url:t.artwork_big_url}:{id:"",title:"",channel_title:"",artwork_url:"",artwork_big_url:""}},pushSong:function(){var t=this;if(t.loading2=!0,t.song.title&&t.song.channel_title){var e={id:t.song.id,channel_title:t.song.channel_title,title:t.song.title,artwork_url:t.song.artwork_url,artwork_big_url:t.song.artwork_big_url};u.post("/api/mfm_track/edit",e).then(function(e){t.loading2=!1,e.success?(t.handleCurrentChange(t.currentPage),t.visible2=!1,t.$message({message:"😄 你很快就可以看到你编辑的这个歌了！！",type:"success"})):t.$message.error("服务器或者网络错误"+e)}).catch(function(e){t.loading2=!1,t.$message.error("服务器或者网络错误"+res)})}else t.$message({message:"😡 那么大的空看不到吗？？",type:"warning"})},handleCurrentChange:function(t){var e=this;e.currentPage=t||1,console.log(e.Stitle),u.get("/api/recommendation/list",{params:{pageNum:10,page:e.currentPage,title:e.Stitle,status:e.Sstatus,nums:e.Snums,desc:e.Sdesc}}).then(function(t){console.log(t),e.songList=t}).catch(function(t){e.$message.error("服务器或者网络错误"+res)}),u.get("/api/recommendation/count",{params:{title:e.Stitle,status:e.Sstatus,nums:e.Snums}}).then(function(t){console.log(t),e.total=t[0].count}).catch(function(t){e.$message.error("服务器或者网络错误"+res)})}},created:function(){this.hosts="http://"+location.hostname+":4000/api/fileupload",this.handleCurrentChange()}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[t._m(0,!1,!1),t._v(" "),a("el-form",{attrs:{"label-width":"80px",inline:!0}},[a("el-form-item",{attrs:{label:"歌单状态"}},[a("el-select",{attrs:{clearable:"",placeholder:"歌单状态筛选"},model:{value:t.Sstatus,callback:function(e){t.Sstatus=e},expression:"Sstatus"}},[a("el-option",{key:"1",attrs:{label:"已上线",value:"1"}}),t._v(" "),a("el-option",{key:"0",attrs:{label:"已下线",value:"0"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"排序方式"}},[a("el-select",{attrs:{clearable:"",placeholder:"排序方式"},model:{value:t.Sdesc,callback:function(e){t.Sdesc=e},expression:"Sdesc"}},[a("el-option",{key:"id",attrs:{label:"ID",value:"id"}}),t._v(" "),a("el-option",{key:"played",attrs:{label:"播放次数",value:"played"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"歌曲名称"}},[a("el-input",{attrs:{placeholder:"歌曲名称"},model:{value:t.Stitle,callback:function(e){t.Stitle=e},expression:"Stitle"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"时长筛选"}},[a("el-select",{attrs:{clearable:"",placeholder:"时长筛选"},model:{value:t.Snums,callback:function(e){t.Snums=e},expression:"Snums"}},[a("el-option",{key:"900",attrs:{label:"≥15分钟",value:"900"}}),t._v(" "),a("el-option",{key:"3600",attrs:{label:"≥60分钟",value:"3600"}})],1)],1),t._v(" "),a("el-button",{attrs:{type:"success",icon:"el-icon-search"},on:{click:function(e){t.handleCurrentChange()}}},[t._v("搜索")])],1),t._v(" "),a("el-table",{attrs:{align:"center","header-align":"center",data:t.songList,height:"calc(100vh - 270px)","row-class-name":t.tableRowClassName}},[a("el-table-column",{attrs:{prop:"id",label:"ID"}}),t._v(" "),a("el-table-column",{attrs:{prop:"track_id",label:"歌曲ID"}}),t._v(" "),a("el-table-column",{attrs:{prop:"title",label:"歌名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"channel_title",label:"歌手"}}),t._v(" "),a("el-table-column",{attrs:{label:"时长"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.formatTime(e.row.duration_in_seconds)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"played",label:"播放数"}}),t._v(" "),a("el-table-column",{attrs:{prop:"artwork_big_url",width:"120px",label:"封面图"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("img",{staticClass:"song_img",attrs:{src:e.row.artwork_big_url,alt:""},on:{click:function(a){t.showBigImg(e.row.artwork_big_url)}}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"original_id",label:"歌单链接"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{staticClass:"links",attrs:{href:"https://www.youtube.com/watch?v="+e.row.original_id,target:"_blank"}},[t._v("https://www.youtube.com/watch?v="+t._s(e.row.original_id))])]}}])}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"处理",width:"220"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.status?a("el-button",{attrs:{plain:"",type:"success"},on:{click:function(a){t.editStatus(0,e.row.track_id)}}},[t._v("已上线")]):t._e(),t._v(" "),0==e.row.status?a("el-button",{attrs:{plain:"",type:"danger"},on:{click:function(a){t.editStatus(1,e.row.track_id)}}},[t._v("已下线")]):t._e(),t._v(" "),a("el-button",{attrs:{plain:"",type:"warning"},on:{click:function(a){t.editSong(e.row)}}},[t._v("编 辑")])]}}])})],1),t._v(" "),a("el-pagination",{attrs:{"current-page":t.currentPage,background:"",layout:"prev, pager, next, jumper",total:t.total},on:{"current-change":t.handleCurrentChange}}),t._v(" "),a("el-dialog",{attrs:{title:"查看大图",width:"500px",visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{staticStyle:{width:"100%"},attrs:{src:t.dialogImg}}),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"danger"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("关 闭")])],1)]),t._v(" "),a("el-dialog",{attrs:{width:"500px",title:t.title,visible:t.addVisible},on:{"update:visible":function(e){t.addVisible=e}}},[a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"danger",loading:t.loading2},on:{click:function(e){t.pushStatus()}}},[t._v("确 定")])],1)]),t._v(" "),a("el-dialog",{attrs:{title:"编辑歌曲",visible:t.visible2},on:{"update:visible":function(e){t.visible2=e}}},[a("el-form",{attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:"歌曲ID"}},[a("el-input",{attrs:{disabled:!0},model:{value:t.song.id,callback:function(e){t.$set(t.song,"id",e)},expression:"song.id"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"歌曲名称",prop:"title"}},[a("el-input",{model:{value:t.song.title,callback:function(e){t.$set(t.song,"title",e)},expression:"song.title"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"歌手"}},[a("el-input",{model:{value:t.song.channel_title,callback:function(e){t.$set(t.song,"channel_title",e)},expression:"song.channel_title"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"success",loading:t.loading2},on:{click:function(e){t.visible2=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"danger",loading:t.loading2},on:{click:function(e){t.pushSong()}}},[t._v("确定")])],1)],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"pages_tab"},[this._v("当前页：歌单管理"),e("i",{staticClass:"el-icon-arrow-right"}),this._v("榜单")])}]},p=a("VU/8")(g,d,!1,null,null,null).exports;a("X2Oc");var m={data:function(){return{songList:[],dialogVisible:!1,dialogImg:"",addVisible:!1,loading2:!1,visible2:!1,currentPage:1,id:"",total:0,idolname:"",Stitle:"",Sstatus:"",title:"",Stype:"",Stag:"",Snums:"",Sdesc:"",hosts:"http://opt.groupy.cn/api/fileupload",Status:1,idolType:"idol",song:{id:"",title:"",channel_title:"",artwork_url:"",artwork_big_url:""}}},methods:{formatTime:function(t){if(t){var e=parseInt(t),a=0,l=0;e>60&&(a=parseInt(e/60),e=parseInt(e%60),a>60&&(l=parseInt(a/60),a=parseInt(a%60)));var s=""+parseInt(e);return s=a>0?parseInt(a)+":"+s:"00:"+s,l>0&&(s=parseInt(l)+":"+s),s}return"0"},handleImg:function(t,e){this.song.img=t.url},tableRowClassName:function(t){var e=t.row;t.index;return"0"==e.status?"del-row":""},showBigImg:function(t){this.dialogImg=t,this.dialogVisible=!0},editStatus:function(t,e){this.addVisible=!0,this.Status=t,this.id=e,this.title=1==t?"你确定要上线ID为"+e+"这个歌吗？？":"你确定要下线ID为"+e+"这个歌吗？？"},pushStatus:function(){var t=this;t.loading2=!0,u.get("/api/mfm_track/edit_status",{params:{id:t.id,status:t.Status}}).then(function(e){t.loading2=!1,e.success?(t.handleCurrentChange(t.currentPage),t.addVisible=!1,0==t.Status?t.$message({message:"😭，你再也不会在app里面看到这个歌了！",type:"success"}):t.$message({message:"😃，你很快就可以在app里面看到这个歌了！",type:"success"})):t.$message.error("服务器或者网络错误"+e)}).catch(function(e){t.loading2=!1,t.$message.error("服务器或者网络错误"+res)})},editSong:function(t){this.visible2=!0,this.song=t?{id:t.track_id,title:t.title,channel_title:t.channel_title,artwork_url:t.artwork_url,artwork_big_url:t.artwork_big_url}:{id:"",title:"",channel_title:"",artwork_url:"",artwork_big_url:""}},pushSong:function(){var t=this;if(t.loading2=!0,t.song.title&&t.song.channel_title){var e={id:t.song.id,channel_title:t.song.channel_title,title:t.song.title,artwork_url:t.song.artwork_url,artwork_big_url:t.song.artwork_big_url};u.post("/api/mfm_track/edit",e).then(function(e){t.loading2=!1,e.success?(t.handleCurrentChange(t.currentPage),t.visible2=!1,t.$message({message:"😄 你很快就可以看到你编辑的这个歌了！！",type:"success"})):t.$message.error("服务器或者网络错误"+e)}).catch(function(e){t.loading2=!1,t.$message.error("服务器或者网络错误"+res)})}else t.$message({message:"😡 那么大的空看不到吗？？",type:"warning"})},handleCurrentChange:function(t){var e=this;e.currentPage=t||1,console.log(e.Stitle),u.get("/api/latest/list",{params:{pageNum:10,page:e.currentPage,title:e.Stitle,status:e.Sstatus,nums:e.Snums,type:e.Stype,desc:e.Sdesc}}).then(function(t){console.log(t),e.songList=t}).catch(function(t){e.$message.error("服务器或者网络错误"+res)}),u.get("/api/latest/count",{params:{title:e.Stitle,status:e.Sstatus,nums:e.Snums,type:e.Stype}}).then(function(t){console.log(t),e.total=t[0].count}).catch(function(t){e.$message.error("服务器或者网络错误"+res)})}},created:function(){this.hosts="http://"+location.hostname+":4000/api/fileupload",this.handleCurrentChange()}},_={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[t._m(0,!1,!1),t._v(" "),a("el-form",{attrs:{"label-width":"80px",inline:!0}},[a("el-form-item",{attrs:{label:"歌单状态"}},[a("el-select",{attrs:{clearable:"",placeholder:"歌单状态筛选"},model:{value:t.Sstatus,callback:function(e){t.Sstatus=e},expression:"Sstatus"}},[a("el-option",{key:"1",attrs:{label:"已上线",value:"1"}}),t._v(" "),a("el-option",{key:"0",attrs:{label:"已下线",value:"0"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"排序方式"}},[a("el-select",{attrs:{clearable:"",placeholder:"排序方式"},model:{value:t.Sdesc,callback:function(e){t.Sdesc=e},expression:"Sdesc"}},[a("el-option",{key:"id",attrs:{label:"ID",value:"id"}}),t._v(" "),a("el-option",{key:"played",attrs:{label:"播放次数",value:"played"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"歌曲名称"}},[a("el-input",{attrs:{placeholder:"歌曲名称"},model:{value:t.Stitle,callback:function(e){t.Stitle=e},expression:"Stitle"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"时长筛选"}},[a("el-select",{attrs:{clearable:"",placeholder:"时长筛选"},model:{value:t.Snums,callback:function(e){t.Snums=e},expression:"Snums"}},[a("el-option",{key:"900",attrs:{label:"≥15分钟",value:"900"}}),t._v(" "),a("el-option",{key:"3600",attrs:{label:"≥60分钟",value:"3600"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"地区筛选"}},[a("el-select",{attrs:{clearable:"",placeholder:"地区筛选"},model:{value:t.Stype,callback:function(e){t.Stype=e},expression:"Stype"}},[a("el-option",{key:"Europe",attrs:{label:"Europe",value:"Europe"}}),t._v(" "),a("el-option",{key:"Japan",attrs:{label:"Japan",value:"Japan"}}),t._v(" "),a("el-option",{key:"Korea",attrs:{label:"Korea",value:"Korea"}})],1)],1),t._v(" "),a("el-button",{attrs:{type:"success",icon:"el-icon-search"},on:{click:function(e){t.handleCurrentChange()}}},[t._v("搜索")])],1),t._v(" "),a("el-table",{attrs:{align:"center","header-align":"center",data:t.songList,height:"calc(100vh - 270px)","row-class-name":t.tableRowClassName}},[a("el-table-column",{attrs:{prop:"id",label:"ID"}}),t._v(" "),a("el-table-column",{attrs:{prop:"track_id",label:"歌曲ID"}}),t._v(" "),a("el-table-column",{attrs:{prop:"title",label:"歌名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"channel_title",label:"歌手"}}),t._v(" "),a("el-table-column",{attrs:{label:"时长"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.formatTime(e.row.duration_in_seconds)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"played",label:"播放数"}}),t._v(" "),a("el-table-column",{attrs:{prop:"type",label:"地区"}}),t._v(" "),a("el-table-column",{attrs:{prop:"artwork_big_url",width:"120px",label:"封面图"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("img",{staticClass:"song_img",attrs:{src:e.row.artwork_big_url,alt:""},on:{click:function(a){t.showBigImg(e.row.artwork_big_url)}}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"original_id",label:"歌单链接"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{staticClass:"links",attrs:{href:"https://www.youtube.com/watch?v="+e.row.original_id,target:"_blank"}},[t._v("https://www.youtube.com/watch?v="+t._s(e.row.original_id))])]}}])}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"处理",width:"220"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.status?a("el-button",{attrs:{plain:"",type:"success"},on:{click:function(a){t.editStatus(0,e.row.track_id)}}},[t._v("已上线")]):t._e(),t._v(" "),0==e.row.status?a("el-button",{attrs:{plain:"",type:"danger"},on:{click:function(a){t.editStatus(1,e.row.track_id)}}},[t._v("已下线")]):t._e(),t._v(" "),a("el-button",{attrs:{plain:"",type:"warning"},on:{click:function(a){t.editSong(e.row)}}},[t._v("编 辑")])]}}])})],1),t._v(" "),a("el-pagination",{attrs:{"current-page":t.currentPage,background:"",layout:"prev, pager, next, jumper",total:t.total},on:{"current-change":t.handleCurrentChange}}),t._v(" "),a("el-dialog",{attrs:{title:"查看大图",width:"500px",visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{staticStyle:{width:"100%"},attrs:{src:t.dialogImg}}),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"danger"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("关 闭")])],1)]),t._v(" "),a("el-dialog",{attrs:{width:"500px",title:t.title,visible:t.addVisible},on:{"update:visible":function(e){t.addVisible=e}}},[a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"danger",loading:t.loading2},on:{click:function(e){t.pushStatus()}}},[t._v("确 定")])],1)]),t._v(" "),a("el-dialog",{attrs:{title:"编辑歌曲",visible:t.visible2},on:{"update:visible":function(e){t.visible2=e}}},[a("el-form",{attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:"歌曲ID"}},[a("el-input",{attrs:{disabled:!0},model:{value:t.song.id,callback:function(e){t.$set(t.song,"id",e)},expression:"song.id"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"歌曲名称",prop:"title"}},[a("el-input",{model:{value:t.song.title,callback:function(e){t.$set(t.song,"title",e)},expression:"song.title"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"歌手"}},[a("el-input",{model:{value:t.song.channel_title,callback:function(e){t.$set(t.song,"channel_title",e)},expression:"song.channel_title"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"封面图-小"}},[a("el-input",{model:{value:t.song.artwork_url,callback:function(e){t.$set(t.song,"artwork_url",e)},expression:"song.artwork_url"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"封面图-大"}},[a("el-input",{model:{value:t.song.artwork_big_url,callback:function(e){t.$set(t.song,"artwork_big_url",e)},expression:"song.artwork_big_url"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"success",loading:t.loading2},on:{click:function(e){t.visible2=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"danger",loading:t.loading2},on:{click:function(e){t.pushSong()}}},[t._v("确定")])],1)],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"pages_tab"},[this._v("当前页：歌单管理"),e("i",{staticClass:"el-icon-arrow-right"}),this._v("榜单")])}]},v=a("VU/8")(m,_,!1,null,null,null).exports;a("X2Oc");var b={data:function(){return{songList:[],dialogVisible:!1,dialogImg:"",addVisible:!1,loading2:!1,visible2:!1,currentPage:1,id:"",total:0,idolname:"",Stitle:"",Sstatus:"",title:"",Stag:"",Sdesc:"",hosts:"http://opt.groupy.cn/api/fileupload",Status:1,Snums:"",idolType:"idol",song:{id:"",title:"",channel_title:"",artwork_url:"",artwork_big_url:""}}},methods:{formatTime:function(t){if(t){var e=parseInt(t),a=0,l=0;e>60&&(a=parseInt(e/60),e=parseInt(e%60),a>60&&(l=parseInt(a/60),a=parseInt(a%60)));var s=""+parseInt(e);return s=a>0?parseInt(a)+":"+s:"00:"+s,l>0&&(s=parseInt(l)+":"+s),s}return"0"},handleImg:function(t,e){this.song.img=t.url},tableRowClassName:function(t){var e=t.row;t.index;return"0"==e.status?"del-row":""},showBigImg:function(t){this.dialogImg=t,this.dialogVisible=!0},editStatus:function(t,e){this.addVisible=!0,this.Status=t,this.id=e,this.title=1==t?"你确定要上线ID为"+e+"这个歌吗？？":"你确定要下线ID为"+e+"这个歌吗？？"},pushStatus:function(){var t=this;t.loading2=!0,u.get("/api/mfm_track/edit_status",{params:{id:t.id,status:t.Status}}).then(function(e){t.loading2=!1,e.success?(t.handleCurrentChange(t.currentPage),t.addVisible=!1,0==t.Status?t.$message({message:"😭，你再也不会在app里面看到这个歌了！",type:"success"}):t.$message({message:"😃，你很快就可以在app里面看到这个歌了！",type:"success"})):t.$message.error("服务器或者网络错误"+e)}).catch(function(e){t.loading2=!1,t.$message.error("服务器或者网络错误"+res)})},editSong:function(t){this.visible2=!0,this.song=t?{id:t.track_id,title:t.title,channel_title:t.channel_title,artwork_url:t.artwork_url,artwork_big_url:t.artwork_big_url}:{id:"",title:"",channel_title:"",artwork_url:"",artwork_big_url:""}},pushSong:function(){var t=this;if(t.loading2=!0,t.song.title&&t.song.channel_title){var e={id:t.song.id,channel_title:t.song.channel_title,title:t.song.title,artwork_url:t.song.artwork_url,artwork_big_url:t.song.artwork_big_url};u.post("/api/mfm_track/edit",e).then(function(e){t.loading2=!1,e.success?(t.handleCurrentChange(t.currentPage),t.visible2=!1,t.$message({message:"😄 你很快就可以看到你编辑的这个歌了！！",type:"success"})):t.$message.error("服务器或者网络错误"+e)}).catch(function(e){t.loading2=!1,t.$message.error("服务器或者网络错误"+res)})}else t.$message({message:"😡 那么大的空看不到吗？？",type:"warning"})},handleCurrentChange:function(t){var e=this;e.currentPage=t||1,console.log(e.Stitle),u.get("/api/ranking/list",{params:{pageNum:10,page:e.currentPage,title:e.Stitle,status:e.Sstatus,nums:e.Snums,desc:e.Sdesc}}).then(function(t){console.log(t),e.songList=t}).catch(function(t){e.$message.error("服务器或者网络错误"+res)}),u.get("/api/ranking/count",{params:{title:e.Stitle,status:e.Sstatus,nums:e.Snums}}).then(function(t){console.log(t),e.total=t[0].count}).catch(function(t){e.$message.error("服务器或者网络错误"+res)})}},created:function(){this.hosts="http://"+location.hostname+":4000/api/fileupload",this.handleCurrentChange()}},f={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[t._m(0,!1,!1),t._v(" "),a("el-form",{attrs:{"label-width":"80px",inline:!0}},[a("el-form-item",{attrs:{label:"歌单状态"}},[a("el-select",{attrs:{clearable:"",placeholder:"歌单状态筛选"},model:{value:t.Sstatus,callback:function(e){t.Sstatus=e},expression:"Sstatus"}},[a("el-option",{key:"1",attrs:{label:"已上线",value:"1"}}),t._v(" "),a("el-option",{key:"0",attrs:{label:"已下线",value:"0"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"排序方式"}},[a("el-select",{attrs:{clearable:"",placeholder:"排序方式"},model:{value:t.Sdesc,callback:function(e){t.Sdesc=e},expression:"Sdesc"}},[a("el-option",{key:"id",attrs:{label:"ID",value:"id"}}),t._v(" "),a("el-option",{key:"played",attrs:{label:"播放次数",value:"played"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"歌曲名称"}},[a("el-input",{attrs:{placeholder:"歌曲名称"},model:{value:t.Stitle,callback:function(e){t.Stitle=e},expression:"Stitle"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"时长筛选"}},[a("el-select",{attrs:{clearable:"",placeholder:"时长筛选"},model:{value:t.Snums,callback:function(e){t.Snums=e},expression:"Snums"}},[a("el-option",{key:"900",attrs:{label:"≥15分钟",value:"900"}}),t._v(" "),a("el-option",{key:"3600",attrs:{label:"≥60分钟",value:"3600"}})],1)],1),t._v(" "),a("el-button",{attrs:{type:"success",icon:"el-icon-search"},on:{click:function(e){t.handleCurrentChange()}}},[t._v("搜索")])],1),t._v(" "),a("el-table",{attrs:{align:"center","header-align":"center",data:t.songList,height:"calc(100vh - 270px)","row-class-name":t.tableRowClassName}},[a("el-table-column",{attrs:{prop:"id",label:"ID"}}),t._v(" "),a("el-table-column",{attrs:{prop:"track_id",label:"歌曲ID"}}),t._v(" "),a("el-table-column",{attrs:{prop:"title",label:"歌名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"channel_title",label:"歌手"}}),t._v(" "),a("el-table-column",{attrs:{label:"时长"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.formatTime(e.row.duration_in_seconds)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"played",label:"播放数"}}),t._v(" "),a("el-table-column",{attrs:{prop:"artwork_big_url",width:"120px",label:"封面图"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("img",{staticClass:"song_img",attrs:{src:e.row.artwork_big_url,alt:""},on:{click:function(a){t.showBigImg(e.row.artwork_big_url)}}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"original_id",label:"歌单链接"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{staticClass:"links",attrs:{href:"https://www.youtube.com/watch?v="+e.row.original_id,target:"_blank"}},[t._v("https://www.youtube.com/watch?v="+t._s(e.row.original_id))])]}}])}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"处理",width:"220"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.status?a("el-button",{attrs:{plain:"",type:"success"},on:{click:function(a){t.editStatus(0,e.row.track_id)}}},[t._v("已上线")]):t._e(),t._v(" "),0==e.row.status?a("el-button",{attrs:{plain:"",type:"danger"},on:{click:function(a){t.editStatus(1,e.row.track_id)}}},[t._v("已下线")]):t._e(),t._v(" "),a("el-button",{attrs:{plain:"",type:"warning"},on:{click:function(a){t.editSong(e.row)}}},[t._v("编 辑")])]}}])})],1),t._v(" "),a("el-pagination",{attrs:{"current-page":t.currentPage,background:"",layout:"prev, pager, next, jumper",total:t.total},on:{"current-change":t.handleCurrentChange}}),t._v(" "),a("el-dialog",{attrs:{title:"查看大图",width:"500px",visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{staticStyle:{width:"100%"},attrs:{src:t.dialogImg}}),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"danger"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("关 闭")])],1)]),t._v(" "),a("el-dialog",{attrs:{width:"500px",title:t.title,visible:t.addVisible},on:{"update:visible":function(e){t.addVisible=e}}},[a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"danger",loading:t.loading2},on:{click:function(e){t.pushStatus()}}},[t._v("确 定")])],1)]),t._v(" "),a("el-dialog",{attrs:{title:"编辑歌曲",visible:t.visible2},on:{"update:visible":function(e){t.visible2=e}}},[a("el-form",{attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:"歌曲ID"}},[a("el-input",{attrs:{disabled:!0},model:{value:t.song.id,callback:function(e){t.$set(t.song,"id",e)},expression:"song.id"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"歌曲名称",prop:"title"}},[a("el-input",{model:{value:t.song.title,callback:function(e){t.$set(t.song,"title",e)},expression:"song.title"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"歌手"}},[a("el-input",{model:{value:t.song.channel_title,callback:function(e){t.$set(t.song,"channel_title",e)},expression:"song.channel_title"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"封面图-小"}},[a("el-input",{model:{value:t.song.artwork_url,callback:function(e){t.$set(t.song,"artwork_url",e)},expression:"song.artwork_url"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"封面图-大"}},[a("el-input",{model:{value:t.song.artwork_big_url,callback:function(e){t.$set(t.song,"artwork_big_url",e)},expression:"song.artwork_big_url"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"success",loading:t.loading2},on:{click:function(e){t.visible2=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"danger",loading:t.loading2},on:{click:function(e){t.pushSong()}}},[t._v("确定")])],1)],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"pages_tab"},[this._v("当前页：歌单管理"),e("i",{staticClass:"el-icon-arrow-right"}),this._v("榜单")])}]},h=a("VU/8")(b,f,!1,null,null,null).exports;a("X2Oc");var k={data:function(){return{songList:[],dialogVisible:!1,dialogImg:"",addVisible:!1,loading2:!1,visible2:!1,currentPage:1,id:"",total:0,idolname:"",Snums:"",Stitle:"",Sstatus:"",title:"",Stag:"",hosts:"http://opt.groupy.cn/api/fileupload",Status:1,idolType:"idol",song:{id:"",title:"",description:"",img:"",tag:"",original_name:"",link:"",status:1},rules:{title:[{required:!0,message:"请输入歌单名称",trigger:"blur"}],link:[{required:!0,message:"请输入歌单链接",trigger:"blur"}],img:[{required:!0,message:"请上传封面图",trigger:"blur"}]}}},methods:{handleImg:function(t,e){this.song.img=t.url},tableRowClassName:function(t){var e=t.row;t.index;return"0"==e.status?"del-row":""},showBigImg:function(t){this.dialogImg=t,this.dialogVisible=!0},editStatus:function(t,e){this.addVisible=!0,this.Status=t,this.id=e,this.title=1==t?"你确定要上线ID为"+e+"这个歌单吗？？":"你确定要下线ID为"+e+"这个歌单吗？？"},pushStatus:function(){var t=this;t.loading2=!0,u.get("/api/playlist/editStatus",{params:{id:t.id,status:t.Status}}).then(function(e){t.loading2=!1,e.success?(t.handleCurrentChange(t.currentPage),t.addVisible=!1,0==t.Status?t.$message({message:"😭，你再也不会在app里面看到这个歌单了！",type:"success"}):t.$message({message:"😃，你很快就可以在app里面看到这个歌单了！",type:"success"})):t.$message.error("服务器或者网络错误"+e)}).catch(function(e){t.loading2=!1,t.$message.error("服务器或者网络错误"+res)})},handleCurrentChange:function(t){var e=this;e.currentPage=t||1,u.get("/api/playlist/list",{params:{pageNum:10,page:e.currentPage,tag:e.Stag,title:e.Stitle,status:e.Sstatus,nums:e.Snums}}).then(function(t){console.log(t),e.songList=t}).catch(function(t){e.$message.error("服务器或者网络错误"+res)}),u.get("/api/playlist/count",{params:{TAG:e.Stag,title:e.Stitle,status:e.Sstatus,nums:e.Snums}}).then(function(t){console.log(t),e.total=t[0].count}).catch(function(t){e.$message.error("服务器或者网络错误"+res)})},editSong:function(t){this.visible2=!0,this.song=t?{id:t.id,title:t.title,description:t.description,img:t.img,tag:t.tag,original_name:t.original_name,link:"https://www.youtube.com/playlist?list="+t.original_id,status:t.status}:{id:"",title:"",description:"",img:"",tag:"",original_name:"",link:"",status:1}},pushSong:function(){var t=this;if(t.loading2=!0,t.song.title&&t.song.link&&t.song.img){var e={id:t.song.id,title:t.song.title,description:t.song.description,img:t.song.img,tag:t.song.tag,original_name:t.song.original_name,original_id:t.song.link.match(/.*list=(.*)&?.*/)[1],status:t.song.status};u.post("/api/playlist/edit",e).then(function(e){t.loading2=!1,e.success?(t.handleCurrentChange(t.currentPage),t.visible2=!1,t.$message({message:"😄 你很快就可以看到你编辑的这个歌单了！！",type:"success"})):t.$message.error("服务器或者网络错误"+e)}).catch(function(e){t.loading2=!1,t.$message.error("服务器或者网络错误"+res)})}else t.$message({message:"😡 那么大的空看不到吗？？",type:"warning"}),t.loading2=!1}},created:function(){this.hosts="http://"+location.hostname+":4000/api/fileupload",this.handleCurrentChange()}},w={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[t._m(0,!1,!1),t._v(" "),a("el-form",{attrs:{"label-width":"80px",inline:!0}},[a("el-form-item",{attrs:{label:"歌单标签"}},[a("el-select",{attrs:{clearable:"",placeholder:"歌单标签筛选"},model:{value:t.Stag,callback:function(e){t.Stag=e},expression:"Stag"}},[a("el-option",{key:"Hot",attrs:{label:"热门歌单",value:"Hot"}}),t._v(" "),a("el-option",{key:"HotSinger",attrs:{label:"人气歌手",value:"HotSinger"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"歌单状态"}},[a("el-select",{attrs:{clearable:"",placeholder:"歌单状态筛选"},model:{value:t.Sstatus,callback:function(e){t.Sstatus=e},expression:"Sstatus"}},[a("el-option",{key:"1",attrs:{label:"已上线",value:"1"}}),t._v(" "),a("el-option",{key:"0",attrs:{label:"已下线",value:"0"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"歌单名称"}},[a("el-input",{attrs:{placeholder:"歌单名称"},model:{value:t.Stitle,callback:function(e){t.Stitle=e},expression:"Stitle"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"歌曲数目"}},[a("el-select",{attrs:{clearable:"",placeholder:"歌曲数目"},model:{value:t.Snums,callback:function(e){t.Snums=e},expression:"Snums"}},[a("el-option",{key:"0",attrs:{label:"0",value:"0"}}),t._v(" "),a("el-option",{key:"<10",attrs:{label:"<10",value:"<10"}})],1)],1),t._v(" "),a("el-button",{attrs:{type:"success",icon:"el-icon-search"},on:{click:function(e){t.handleCurrentChange()}}},[t._v("搜索")]),t._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(e){t.editSong()}}},[t._v("添加歌单")])],1),t._v(" "),a("el-table",{attrs:{align:"center","header-align":"center",data:t.songList,height:"calc(100vh - 270px)","row-class-name":t.tableRowClassName}},[a("el-table-column",{attrs:{prop:"id",label:"ID",width:"60px"}}),t._v(" "),a("el-table-column",{attrs:{prop:"title",label:"歌名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"description",label:"描述"}}),t._v(" "),a("el-table-column",{attrs:{prop:"nums",label:"歌曲数"}}),t._v(" "),a("el-table-column",{attrs:{label:"标签"},scopedSlots:t._u([{key:"default",fn:function(e){return["Hot"==e.row.tag?a("span",[t._v("热门歌单")]):t._e(),t._v(" "),"HotSinger"==e.row.tag?a("span",[t._v("人气歌手")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"img",width:"120px",label:"封面图"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("img",{staticClass:"song_img",attrs:{src:e.row.img,alt:""},on:{click:function(a){t.showBigImg(e.row.img)}}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"original_id",label:"歌单链接"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{staticClass:"links",attrs:{href:"https://www.youtube.com/playlist?list="+e.row.original_id,target:"_blank"}},[t._v("https://www.youtube.com/playlist?list="+t._s(e.row.original_id))])]}}])}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"处理",width:"220"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.status?a("el-button",{attrs:{plain:"",type:"success"},on:{click:function(a){t.editStatus(0,e.row.id)}}},[t._v("已上线")]):t._e(),t._v(" "),0==e.row.status?a("el-button",{attrs:{plain:"",type:"danger"},on:{click:function(a){t.editStatus(1,e.row.id)}}},[t._v("已下线")]):t._e(),t._v(" "),a("el-button",{attrs:{plain:"",type:"warning"},on:{click:function(a){t.editSong(e.row)}}},[t._v("修 改")])]}}])})],1),t._v(" "),a("el-pagination",{attrs:{"current-page":t.currentPage,background:"",layout:"prev, pager, next, jumper",total:t.total},on:{"current-change":t.handleCurrentChange}}),t._v(" "),a("el-dialog",{attrs:{title:"查看大图",width:"500px",visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{staticStyle:{width:"100%"},attrs:{src:t.dialogImg}}),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"danger"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("关 闭")])],1)]),t._v(" "),a("el-dialog",{attrs:{width:"500px",title:t.title,visible:t.addVisible},on:{"update:visible":function(e){t.addVisible=e}}},[a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"danger",loading:t.loading2},on:{click:function(e){t.pushStatus()}}},[t._v("确 定")])],1)]),t._v(" "),a("el-dialog",{attrs:{title:"编辑歌单",visible:t.visible2},on:{"update:visible":function(e){t.visible2=e}}},[a("el-form",{attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:"歌单ID"}},[a("el-input",{attrs:{disabled:!0},model:{value:t.song.id,callback:function(e){t.$set(t.song,"id",e)},expression:"song.id"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"歌单名称"}},[a("em",[t._v("*")]),t._v(" "),a("el-input",{model:{value:t.song.title,callback:function(e){t.$set(t.song,"title",e)},expression:"song.title"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"歌单链接"}},[a("em",[t._v("*")]),t._v(" "),a("el-input",{model:{value:t.song.link,callback:function(e){t.$set(t.song,"link",e)},expression:"song.link"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"歌单描述"}},[a("el-input",{model:{value:t.song.description,callback:function(e){t.$set(t.song,"description",e)},expression:"song.description"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"歌单标签"}},[a("el-radio-group",{model:{value:t.song.tag,callback:function(e){t.$set(t.song,"tag",e)},expression:"song.tag"}},[a("el-radio",{attrs:{label:"HotSinger"}},[t._v("人气歌手")]),t._v(" "),a("el-radio",{attrs:{label:"Hot"}},[t._v("热门歌单")]),t._v(" "),a("el-radio",{attrs:{label:""}},[t._v("其他")])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"封面图上传"}},[a("em",[t._v("*")]),t._v(" "),a("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.hosts,"show-file-list":!1,"on-success":t.handleImg}},[t.song.img?a("img",{staticClass:"avatar",attrs:{src:t.song.img}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),t._v(" "),a("el-form-item",{attrs:{label:"中文描述"}},[a("el-input",{model:{value:t.song.original_name,callback:function(e){t.$set(t.song,"original_name",e)},expression:"song.original_name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"是否上线"}},[a("el-radio-group",{model:{value:t.song.status,callback:function(e){t.$set(t.song,"status",e)},expression:"song.status"}},[a("el-radio",{attrs:{label:0}},[t._v("否")]),t._v(" "),a("el-radio",{attrs:{label:1}},[t._v("是")])],1)],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"success",loading:t.loading2},on:{click:function(e){t.visible2=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"danger",loading:t.loading2},on:{click:function(e){t.pushSong()}}},[t._v("确定")])],1)],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"pages_tab"},[this._v("当前页：歌单管理"),e("i",{staticClass:"el-icon-arrow-right"}),this._v("全部歌单")])}]},S=a("VU/8")(k,w,!1,function(t){a("667q")},"data-v-7f18034f",null).exports;a("X2Oc");var y={data:function(){return{songList:[],dialogVisible:!1,dialogImg:"",addVisible:!1,loading2:!1,visible2:!1,currentPage:1,id:"",total:0,idolname:"",Snums:"",Stitle:"",Sstatus:"",title:"",Stag:"",Sdesc:"",hosts:"http://opt.groupy.cn/api/fileupload",Status:1,idolType:"idol",song:{id:"",title:"",channel_title:"",artwork_url:"",artwork_big_url:""}}},methods:{formatTime:function(t){if(t){var e=parseInt(t),a=0,l=0;e>60&&(a=parseInt(e/60),e=parseInt(e%60),a>60&&(l=parseInt(a/60),a=parseInt(a%60)));var s=""+parseInt(e);return s=a>0?parseInt(a)+":"+s:"00:"+s,l>0&&(s=parseInt(l)+":"+s),s}return"0"},handleImg:function(t,e){this.song.img=t.url},tableRowClassName:function(t){var e=t.row;t.index;return"0"==e.status?"del-row":""},showBigImg:function(t){this.dialogImg=t,this.dialogVisible=!0},editStatus:function(t,e){this.addVisible=!0,this.Status=t,this.id=e,this.title=1==t?"你确定要上线ID为"+e+"这个歌吗？？":"你确定要下线ID为"+e+"这个歌吗？？"},pushStatus:function(){var t=this;t.loading2=!0,u.get("/api/mfm_track/edit_status",{params:{id:t.id,status:t.Status}}).then(function(e){t.loading2=!1,e.success?(t.handleCurrentChange(t.currentPage),t.addVisible=!1,0==t.Status?t.$message({message:"😭，你再也不会在app里面看到这个歌了！",type:"success"}):t.$message({message:"😃，你很快就可以在app里面看到这个歌了！",type:"success"})):t.$message.error("服务器或者网络错误"+e)}).catch(function(e){t.loading2=!1,t.$message.error("服务器或者网络错误"+res)})},editSong:function(t){this.visible2=!0,this.song=t?{id:t.id,title:t.title,channel_title:t.channel_title,artwork_url:t.artwork_url,artwork_big_url:t.artwork_big_url}:{id:"",title:"",channel_title:"",artwork_url:"",artwork_big_url:""}},pushSong:function(){var t=this;if(t.loading2=!0,t.song.title&&t.song.channel_title){var e={id:t.song.id,channel_title:t.song.channel_title,title:t.song.title,artwork_url:t.song.artwork_url,artwork_big_url:t.song.artwork_big_url};u.post("/api/mfm_track/edit",e).then(function(e){t.loading2=!1,e.success?(t.handleCurrentChange(t.currentPage),t.visible2=!1,t.$message({message:"😄 你很快就可以看到你编辑的这个歌了！！",type:"success"})):t.$message.error("服务器或者网络错误"+e)}).catch(function(e){t.loading2=!1,t.$message.error("服务器或者网络错误"+res)})}else t.$message({message:"😡 那么大的空看不到吗？？",type:"warning"})},handleCurrentChange:function(t){var e=this;e.currentPage=t||1,console.log(e.Stitle),u.get("/api/mfm_track/list",{params:{pageNum:10,page:e.currentPage,title:e.Stitle,status:e.Sstatus,nums:e.Snums,desc:e.Sdesc}}).then(function(t){console.log(t),e.songList=t.rows,e.total=t.count}).catch(function(t){e.$message.error("服务器或者网络错误"+res)})}},created:function(){this.hosts="http://"+location.hostname+":4000/api/fileupload",this.handleCurrentChange()}},C={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[t._m(0,!1,!1),t._v(" "),a("el-form",{attrs:{"label-width":"80px",inline:!0}},[a("el-form-item",{attrs:{label:"歌曲状态"}},[a("el-select",{attrs:{clearable:"",placeholder:"歌曲状态筛选"},model:{value:t.Sstatus,callback:function(e){t.Sstatus=e},expression:"Sstatus"}},[a("el-option",{key:"1",attrs:{label:"已上线",value:"1"}}),t._v(" "),a("el-option",{key:"0",attrs:{label:"已下线",value:"0"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"排序方式"}},[a("el-select",{attrs:{clearable:"",placeholder:"排序方式"},model:{value:t.Sdesc,callback:function(e){t.Sdesc=e},expression:"Sdesc"}},[a("el-option",{key:"id",attrs:{label:"ID",value:"id"}}),t._v(" "),a("el-option",{key:"played",attrs:{label:"播放次数",value:"played"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"歌曲名称"}},[a("el-input",{attrs:{placeholder:"歌曲名称"},model:{value:t.Stitle,callback:function(e){t.Stitle=e},expression:"Stitle"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"时长筛选"}},[a("el-select",{attrs:{clearable:"",placeholder:"时长筛选"},model:{value:t.Snums,callback:function(e){t.Snums=e},expression:"Snums"}},[a("el-option",{key:"3600",attrs:{label:"≥60分钟",value:"3600"}})],1)],1),t._v(" "),a("el-button",{attrs:{type:"success",icon:"el-icon-search"},on:{click:function(e){t.handleCurrentChange()}}},[t._v("搜索")])],1),t._v(" "),a("el-table",{attrs:{align:"center","header-align":"center",data:t.songList,height:"calc(100vh - 270px)","row-class-name":t.tableRowClassName}},[a("el-table-column",{attrs:{prop:"id",label:"ID"}}),t._v(" "),a("el-table-column",{attrs:{prop:"title",label:"歌名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"channel_title",label:"歌手"}}),t._v(" "),a("el-table-column",{attrs:{label:"时长"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.formatTime(e.row.duration_in_seconds)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"played",label:"播放次数"}}),t._v(" "),a("el-table-column",{attrs:{prop:"artwork_url",width:"120px",label:"封面图"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("img",{staticClass:"song_img",attrs:{src:e.row.artwork_url,alt:""},on:{click:function(a){t.showBigImg(e.row.artwork_big_url)}}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"original_id",label:"歌曲链接"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{staticClass:"links",attrs:{href:"https://www.youtube.com/watch?v="+e.row.original_id,target:"_blank"}},[t._v("https://www.youtube.com/watch?v="+t._s(e.row.original_id))])]}}])}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"处理",width:"220"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.status?a("el-button",{attrs:{plain:"",type:"success"},on:{click:function(a){t.editStatus(0,e.row.id)}}},[t._v("已上线")]):t._e(),t._v(" "),0==e.row.status?a("el-button",{attrs:{plain:"",type:"danger"},on:{click:function(a){t.editStatus(1,e.row.id)}}},[t._v("已下线")]):t._e(),t._v(" "),a("el-button",{attrs:{plain:"",type:"warning"},on:{click:function(a){t.editSong(e.row)}}},[t._v("修 改")])]}}])})],1),t._v(" "),a("el-pagination",{attrs:{"current-page":t.currentPage,background:"",layout:"prev, pager, next, jumper",total:t.total},on:{"current-change":t.handleCurrentChange}}),t._v(" "),a("el-dialog",{attrs:{title:"查看大图",width:"500px",visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{staticStyle:{width:"100%"},attrs:{src:t.dialogImg}}),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"danger"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("关 闭")])],1)]),t._v(" "),a("el-dialog",{attrs:{width:"500px",title:t.title,visible:t.addVisible},on:{"update:visible":function(e){t.addVisible=e}}},[a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"danger",loading:t.loading2},on:{click:function(e){t.pushStatus()}}},[t._v("确 定")])],1)]),t._v(" "),a("el-dialog",{attrs:{title:"编辑歌曲",visible:t.visible2},on:{"update:visible":function(e){t.visible2=e}}},[a("el-form",{attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:"歌曲ID"}},[a("el-input",{attrs:{disabled:!0},model:{value:t.song.id,callback:function(e){t.$set(t.song,"id",e)},expression:"song.id"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"歌曲名称",prop:"title"}},[a("el-input",{model:{value:t.song.title,callback:function(e){t.$set(t.song,"title",e)},expression:"song.title"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"歌手"}},[a("el-input",{model:{value:t.song.channel_title,callback:function(e){t.$set(t.song,"channel_title",e)},expression:"song.channel_title"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"封面图-小"}},[a("el-input",{model:{value:t.song.artwork_url,callback:function(e){t.$set(t.song,"artwork_url",e)},expression:"song.artwork_url"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"封面图-大"}},[a("el-input",{model:{value:t.song.artwork_big_url,callback:function(e){t.$set(t.song,"artwork_big_url",e)},expression:"song.artwork_big_url"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"success",loading:t.loading2},on:{click:function(e){t.visible2=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"danger",loading:t.loading2},on:{click:function(e){t.pushSong()}}},[t._v("确定")])],1)],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"pages_tab"},[this._v("当前页：歌单管理"),e("i",{staticClass:"el-icon-arrow-right"}),this._v("全部歌曲")])}]},x=a("VU/8")(y,C,!1,null,null,null).exports;a("X2Oc");var $={data:function(){return{songList:[],dialogVisible:!1,dialogImg:"",addVisible:!1,loading2:!1,visible2:!1,currentPage:1,id:"",total:0,idolname:"",Snums:"",Stitle:"",Sstatus:"",title:"",Stag:"",hosts:"http://opt.groupy.cn/api/fileupload",Status:1,idolType:"idol",song:{id:"",title:"",channel_title:""}}},methods:{formatTime:function(t){return new Date(t).Format("yyyy.MM.dd hh:mm")},handleImg:function(t,e){this.song.img=t.url},tableRowClassName:function(t){var e=t.row;t.index;return console.log(e),"0"==e.active?"del-row":""},showBigImg:function(t){this.dialogImg=t,this.dialogVisible=!0},editStatus:function(t,e){this.addVisible=!0,this.Status=t,this.id=e,this.title=1==t?"你确定要上线ID为"+e+"这个歌吗？？":"你确定要下线ID为"+e+"这个歌吗？？"},handleCurrentChange:function(t){var e=this;e.currentPage=t||1,console.log(e.Stitle),u.get("/api/search_keywords/list",{params:{pageNum:10,page:e.currentPage,keyword:e.Stitle,active:e.Sstatus}}).then(function(t){console.log(t),e.songList=t.rows,e.total=t.count}).catch(function(t){e.$message.error("服务器或者网络错误"+res)})}},created:function(){this.hosts="http://"+location.hostname+":4000/api/fileupload",this.handleCurrentChange()}},I={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[t._m(0,!1,!1),t._v(" "),a("el-form",{attrs:{"label-width":"80px",inline:!0}},[a("el-form-item",{attrs:{label:"歌曲状态"}},[a("el-select",{attrs:{clearable:"",placeholder:"歌曲状态筛选"},model:{value:t.Sstatus,callback:function(e){t.Sstatus=e},expression:"Sstatus"}},[a("el-option",{key:"1",attrs:{label:"已上线",value:"1"}}),t._v(" "),a("el-option",{key:"0",attrs:{label:"已下线",value:"0"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"关键词"}},[a("el-input",{attrs:{placeholder:"关键词"},model:{value:t.Stitle,callback:function(e){t.Stitle=e},expression:"Stitle"}})],1),t._v(" "),a("el-button",{attrs:{type:"success",icon:"el-icon-search"},on:{click:function(e){t.handleCurrentChange()}}},[t._v("搜索")])],1),t._v(" "),a("el-table",{attrs:{align:"center","header-align":"center",data:t.songList,height:"calc(100vh - 270px)","row-class-name":t.tableRowClassName}},[a("el-table-column",{attrs:{prop:"id",label:"ID"}}),t._v(" "),a("el-table-column",{attrs:{prop:"keyword",label:"关键词"}}),t._v(" "),a("el-table-column",{attrs:{prop:"sum",label:"搜索次数"}}),t._v(" "),a("el-table-column",{attrs:{prop:"position",label:"位置"}}),t._v(" "),a("el-table-column",{attrs:{label:"创建时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.formatTime(e.row.create_time)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"更新时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.formatTime(e.row.update_time)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"icon",width:"120px",label:"封面图"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("img",{staticClass:"song_img",attrs:{src:e.row.icon,alt:""},on:{click:function(a){t.showBigImg(e.row.icon)}}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.active?a("span",[t._v("已上线")]):a("span",{staticStyle:{color:"#f00"}},[t._v("已下线")])]}}])})],1),t._v(" "),a("el-pagination",{attrs:{"current-page":t.currentPage,background:"",layout:"prev, pager, next, jumper",total:t.total},on:{"current-change":t.handleCurrentChange}}),t._v(" "),a("el-dialog",{attrs:{title:"查看大图",width:"500px",visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{staticStyle:{width:"100%"},attrs:{src:t.dialogImg}}),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"danger"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("关 闭")])],1)]),t._v(" "),a("el-dialog",{attrs:{width:"500px",title:t.title,visible:t.addVisible},on:{"update:visible":function(e){t.addVisible=e}}},[a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"danger",loading:t.loading2},on:{click:function(e){t.pushStatus()}}},[t._v("确 定")])],1)]),t._v(" "),a("el-dialog",{attrs:{title:"编辑歌曲",visible:t.visible2},on:{"update:visible":function(e){t.visible2=e}}},[a("el-form",{attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:"歌曲ID"}},[a("el-input",{attrs:{disabled:!0},model:{value:t.song.id,callback:function(e){t.$set(t.song,"id",e)},expression:"song.id"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"歌曲名称",prop:"title"}},[a("el-input",{model:{value:t.song.title,callback:function(e){t.$set(t.song,"title",e)},expression:"song.title"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"歌手"}},[a("el-input",{model:{value:t.song.channel_title,callback:function(e){t.$set(t.song,"channel_title",e)},expression:"song.channel_title"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"success",loading:t.loading2},on:{click:function(e){t.visible2=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"danger",loading:t.loading2},on:{click:function(e){t.pushSong()}}},[t._v("确定")])],1)],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"pages_tab"},[this._v("当前页：歌单管理"),e("i",{staticClass:"el-icon-arrow-right"}),this._v("全部歌曲")])}]},V=a("VU/8")($,I,!1,null,null,null).exports;a("X2Oc");var P={data:function(){return{songList:[],dialogVisible:!1,dialogImg:"",addVisible:!1,loading2:!1,visible2:!1,currentPage:1,id:"",total:0,idolname:"",Snums:"",Stitle:"",Sstatus:"",title:"",Stag:"",hosts:"http://opt.groupy.cn/api/fileupload",Status:1,idolType:"idol",song:{id:"",title:"",description:"",img:"",tag:"",original_name:"",link:"",status:1},rules:{title:[{required:!0,message:"请输入歌单名称",trigger:"blur"}],link:[{required:!0,message:"请输入歌单链接",trigger:"blur"}],img:[{required:!0,message:"请上传封面图",trigger:"blur"}]}}},methods:{handleImg:function(t,e){this.song.img=t.url},tableRowClassName:function(t){var e=t.row;t.index;return"0"==e.status?"del-row":""},showBigImg:function(t){this.dialogImg=t,this.dialogVisible=!0},editStatus:function(t,e){this.addVisible=!0,this.Status=t,this.id=e,this.title=1==t?"你确定要上线ID为"+e+"这个歌单吗？？":"你确定要下线ID为"+e+"这个歌单吗？？"},pushStatus:function(){var t=this;t.loading2=!0,u.get("/api/playlist/editStatus",{params:{id:t.id,status:t.Status}}).then(function(e){t.loading2=!1,e.success?(t.handleCurrentChange(t.currentPage),t.addVisible=!1,0==t.Status?t.$message({message:"😭，你再也不会在app里面看到这个歌单了！",type:"success"}):t.$message({message:"😃，你很快就可以在app里面看到这个歌单了！",type:"success"})):t.$message.error("服务器或者网络错误"+e)}).catch(function(e){t.loading2=!1,t.$message.error("服务器或者网络错误"+res)})},handleCurrentChange:function(t){var e=this;e.currentPage=t||1,u.get("/api/playlist/list",{params:{pageNum:10,page:e.currentPage,tag:"HotSinger",title:e.Stitle,status:e.Sstatus,nums:e.Snums}}).then(function(t){console.log(t),e.songList=t}).catch(function(t){e.$message.error("服务器或者网络错误"+res)}),u.get("/api/playlist/count",{params:{tag:"HotSinger",title:e.Stitle,status:e.Sstatus,nums:e.Snums}}).then(function(t){console.log(t),e.total=t[0].count}).catch(function(t){e.$message.error("服务器或者网络错误"+res)})},editSong:function(t){this.visible2=!0,this.song=t?{id:t.id,title:t.title,description:t.description,img:t.img,tag:t.tag,original_name:t.original_name,link:"https://www.youtube.com/playlist?list="+t.original_id,status:t.status}:{id:"",title:"",description:"",img:"",tag:"",original_name:"",link:"",status:1}},pushSong:function(){var t=this;if(t.loading2=!0,t.song.title&&t.song.link&&t.song.img){var e={id:t.song.id,title:t.song.title,description:t.song.description,img:t.song.img,tag:t.song.tag,original_name:t.song.original_name,original_id:t.song.link.match(/.*list=(.*)&?.*/)[1],status:t.song.status};u.post("/api/playlist/edit",e).then(function(e){t.loading2=!1,e.success?(t.handleCurrentChange(t.currentPage),t.visible2=!1,t.$message({message:"😄 你很快就可以看到你编辑的这个歌单了！！",type:"success"})):t.$message.error("服务器或者网络错误"+e)}).catch(function(e){t.loading2=!1,t.$message.error("服务器或者网络错误"+res)})}else t.$message({message:"😡 那么大的空看不到吗？？",type:"warning"}),t.loading2=!1}},created:function(){this.hosts="http://"+location.hostname+":4000/api/fileupload",this.handleCurrentChange()}},D={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[t._m(0,!1,!1),t._v(" "),a("el-form",{attrs:{"label-width":"80px",inline:!0}},[a("el-form-item",{attrs:{label:"歌单状态"}},[a("el-select",{attrs:{clearable:"",placeholder:"歌单状态筛选"},model:{value:t.Sstatus,callback:function(e){t.Sstatus=e},expression:"Sstatus"}},[a("el-option",{key:"1",attrs:{label:"已上线",value:"1"}}),t._v(" "),a("el-option",{key:"0",attrs:{label:"已下线",value:"0"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"歌单名称"}},[a("el-input",{attrs:{placeholder:"歌单名称"},model:{value:t.Stitle,callback:function(e){t.Stitle=e},expression:"Stitle"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"歌曲数目"}},[a("el-select",{attrs:{clearable:"",placeholder:"歌曲数目"},model:{value:t.Snums,callback:function(e){t.Snums=e},expression:"Snums"}},[a("el-option",{key:"0",attrs:{label:"0",value:"0"}}),t._v(" "),a("el-option",{key:"<10",attrs:{label:"<10",value:"<10"}})],1)],1),t._v(" "),a("el-button",{attrs:{type:"success",icon:"el-icon-search"},on:{click:function(e){t.handleCurrentChange()}}},[t._v("搜索")]),t._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(e){t.editSong()}}},[t._v("添加歌单")])],1),t._v(" "),a("el-table",{attrs:{align:"center","header-align":"center",data:t.songList,height:"calc(100vh - 270px)","row-class-name":t.tableRowClassName}},[a("el-table-column",{attrs:{prop:"id",label:"ID",width:"60px"}}),t._v(" "),a("el-table-column",{attrs:{prop:"title",label:"歌名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"description",label:"描述"}}),t._v(" "),a("el-table-column",{attrs:{prop:"nums",label:"歌曲数"}}),t._v(" "),a("el-table-column",{attrs:{prop:"img",width:"120px",label:"封面图"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("img",{staticClass:"song_img",attrs:{src:e.row.img,alt:""},on:{click:function(a){t.showBigImg(e.row.img)}}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"original_id",label:"歌单链接"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{staticClass:"links",attrs:{href:"https://www.youtube.com/playlist?list="+e.row.original_id,target:"_blank"}},[t._v("https://www.youtube.com/playlist?list="+t._s(e.row.original_id))])]}}])}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"处理",width:"220"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.status?a("el-button",{attrs:{plain:"",type:"success"},on:{click:function(a){t.editStatus(0,e.row.id)}}},[t._v("已上线")]):t._e(),t._v(" "),0==e.row.status?a("el-button",{attrs:{plain:"",type:"danger"},on:{click:function(a){t.editStatus(1,e.row.id)}}},[t._v("已下线")]):t._e(),t._v(" "),a("el-button",{attrs:{plain:"",type:"warning"},on:{click:function(a){t.editSong(e.row)}}},[t._v("修 改")])]}}])})],1),t._v(" "),a("el-pagination",{attrs:{"current-page":t.currentPage,background:"",layout:"prev, pager, next, jumper",total:t.total},on:{"current-change":t.handleCurrentChange}}),t._v(" "),a("el-dialog",{attrs:{title:"查看大图",width:"500px",visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{staticStyle:{width:"100%"},attrs:{src:t.dialogImg}}),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"danger"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("关 闭")])],1)]),t._v(" "),a("el-dialog",{attrs:{width:"500px",title:t.title,visible:t.addVisible},on:{"update:visible":function(e){t.addVisible=e}}},[a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"danger",loading:t.loading2},on:{click:function(e){t.pushStatus()}}},[t._v("确 定")])],1)]),t._v(" "),a("el-dialog",{attrs:{title:"编辑歌单",visible:t.visible2},on:{"update:visible":function(e){t.visible2=e}}},[a("el-form",{attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:"歌单ID"}},[a("el-input",{attrs:{disabled:!0},model:{value:t.song.id,callback:function(e){t.$set(t.song,"id",e)},expression:"song.id"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"歌单名称"}},[a("em",[t._v("*")]),t._v(" "),a("el-input",{model:{value:t.song.title,callback:function(e){t.$set(t.song,"title",e)},expression:"song.title"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"歌单链接"}},[a("em",[t._v("*")]),t._v(" "),a("el-input",{model:{value:t.song.link,callback:function(e){t.$set(t.song,"link",e)},expression:"song.link"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"歌单描述"}},[a("el-input",{model:{value:t.song.description,callback:function(e){t.$set(t.song,"description",e)},expression:"song.description"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"歌单标签"}},[a("el-radio-group",{model:{value:t.song.tag,callback:function(e){t.$set(t.song,"tag",e)},expression:"song.tag"}},[a("el-radio",{attrs:{label:"HotSinger"}},[t._v("人气歌手")]),t._v(" "),a("el-radio",{attrs:{label:"Hot"}},[t._v("热门歌单")]),t._v(" "),a("el-radio",{attrs:{label:""}},[t._v("其他")])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"封面图上传"}},[a("em",[t._v("*")]),t._v(" "),a("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.hosts,"show-file-list":!1,"on-success":t.handleImg}},[t.song.img?a("img",{staticClass:"avatar",attrs:{src:t.song.img}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),t._v(" "),a("el-form-item",{attrs:{label:"中文描述"}},[a("el-input",{model:{value:t.song.original_name,callback:function(e){t.$set(t.song,"original_name",e)},expression:"song.original_name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"是否上线"}},[a("el-radio-group",{model:{value:t.song.status,callback:function(e){t.$set(t.song,"status",e)},expression:"song.status"}},[a("el-radio",{attrs:{label:0}},[t._v("否")]),t._v(" "),a("el-radio",{attrs:{label:1}},[t._v("是")])],1)],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"success",loading:t.loading2},on:{click:function(e){t.visible2=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"danger",loading:t.loading2},on:{click:function(e){t.pushSong()}}},[t._v("确定")])],1)],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"pages_tab"},[this._v("当前页：歌单管理"),e("i",{staticClass:"el-icon-arrow-right"}),this._v("全部歌单")])}]},L=a("VU/8")(P,D,!1,function(t){a("Vfz+")},"data-v-3a758ebe",null).exports;a("X2Oc");var R={data:function(){return{transactionsList:[],summaries:{},dialogVisible:!1,currentPage:1,loading2:!1,total:0,Sname:"",hosts:"http://opt.groupy.cn/api/fileupload",Sfans:"",targetType:"",app:{id:"",version_number:"",download_url:"",package_size:"",version_features:""}}},methods:{handleImg:function(t,e){this.app.download_url=t.url,this.app.package_size=(e.size/1048576).toFixed(2)+"M"},formatTime:function(t){return new Date(t).Format("yyyy.MM.dd")},handleCurrentChange:function(t){var e=this;u.get("/api/app_info/list",{params:{page:e.currentPage,pageNum:10,name:e.Sname}}).then(function(t){e.transactionsList=t.rows,e.total=t.count})},addApp:function(t){this.dialogVisible=!0,this.app=t?{id:t.id,version_number:t.app_version,download_url:t.download_url}:{id:"",version_number:"",download_url:"",package_size:"",version_features:""}},pushApp:function(){var t=this;t.app.version_number&&t.app.download_url&&t.app.package_size&&t.app.version_features?(t.loading2=!0,u.post("/api/app_info/edit",t.app).then(function(e){e.success?(t.handleCurrentChange(),t.$message({message:"更新包成功了！！",type:"success"}),t.dialogVisible=!1,t.loading2=!1):(t.$message.error("可能是你的破网断了，也可能是服务器重启了，等一下再试好吗？"),t.loading2=!1)})):t.$message({message:"😡 包没传完还是信息没填完？？",type:"warning"})}},created:function(){this.hosts="http://"+location.hostname+":4000/api/fileupload",this.handleCurrentChange()}},E={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[t._m(0,!1,!1),t._v(" "),a("el-form",{attrs:{"label-width":"80px",inline:!0}},[a("el-button",{staticStyle:{float:"right","margin-bottom":"20px"},attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(e){t.addApp()}}},[t._v("添加新包")])],1),t._v(" "),a("el-table",{attrs:{data:t.transactionsList,height:"calc(100vh - 255px)"}},[a("el-table-column",{attrs:{prop:"id",label:"id"}}),t._v(" "),a("el-table-column",{attrs:{label:"版本号",prop:"version_number"}}),t._v(" "),a("el-table-column",{attrs:{label:"下载链接",prop:"download_url"}}),t._v(" "),a("el-table-column",{attrs:{label:"大小",prop:"package_size"}}),t._v(" "),a("el-table-column",{attrs:{label:"版本特性",prop:"version_features"}}),t._v(" "),a("el-table-column",{attrs:{label:"更新时间",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{on:{click:function(t){}}},[t._v(t._s(t.formatTime(e.row.update_date)))])]}}])})],1),t._v(" "),a("el-pagination",{attrs:{"current-page":t.currentPage,background:"",layout:"prev, pager, next, jumper",total:t.total},on:{"current-change":t.handleCurrentChange}}),t._v(" "),a("el-dialog",{attrs:{title:"编辑团体",visible:t.dialogVisible,"modal-append-to-body":!1},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",[a("el-form-item",{attrs:{label:"ID"}},[a("el-input",{attrs:{disabled:!0},model:{value:t.app.id,callback:function(e){t.$set(t.app,"id",e)},expression:"app.id"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"版本号"}},[a("el-input",{model:{value:t.app.version_number,callback:function(e){t.$set(t.app,"version_number",e)},expression:"app.version_number"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"版本特性"}},[a("el-input",{model:{value:t.app.version_features,callback:function(e){t.$set(t.app,"version_features",e)},expression:"app.version_features"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"大小"}},[a("el-input",{attrs:{disabled:!0},model:{value:t.app.package_size,callback:function(e){t.$set(t.app,"package_size",e)},expression:"app.package_size"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"包链接"}},[t.app.download_url?a("el-input",{attrs:{placeholder:"ID",type:"textarea",disabled:!0},model:{value:t.app.download_url,callback:function(e){t.$set(t.app,"download_url",e)},expression:"app.download_url"}}):t._e()],1),t._v(" "),a("div",[a("el-upload",{staticClass:"upload-demo",attrs:{drag:"","on-success":t.handleImg,action:t.hosts}},[a("i",{staticClass:"el-icon-upload"}),t._v(" "),a("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),a("em",[t._v("点击上传")])]),t._v(" "),a("div",{staticClass:"el-upload__tip",staticStyle:{color:"#f00"},attrs:{slot:"tip"},slot:"tip"},[t._v("因为安装包有点大，所以上传时间会久一点。请耐心等待！不要中途放弃！！\n            "),a("br"),a("b",[t._v("⚠️注意：上传文件过程中进度显示100%并不代表成功了！！！"),a("br"),t._v("\n⚠️当你看到100%消失了变成了上面的包链接地址也变了size也有了，那么恭喜你！传成功了！")]),t._v(" "),a("br"),a("b",[t._v("⚠️上传的包后缀是.apk，这个我希望你真的知道！！")])])])],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"success",loading:t.loading2},on:{click:function(e){t.pushApp()}}},[t._v("提 交")]),t._v(" "),a("el-button",{attrs:{type:"danger",loading:t.loading2},on:{click:function(e){t.dialogVisible=!1}}},[t._v("关 闭")])],1)],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"pages_tab"},[this._v("当前页：发布管理"),e("i",{staticClass:"el-icon-arrow-right"}),this._v("首页团队推荐")])}]},N=a("VU/8")(R,E,!1,function(t){a("N69S")},"data-v-6214cffe",null).exports,T={data:function(){return{user:"",pw:""}},methods:{login:function(){if("musicz2018"==this.user&&"musicz@groupY"==this.pw){var t="http://"+location.host+"/#/allList";window.open(t,"_self"),sessionStorage.setItem("username","music")}else this.$message.error("账号和密码不匹配")}},created:function(){if(sessionStorage.getItem("username")){var t="http://"+location.host+"/#/allList";window.open(t,"_self")}}},z={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"login"},[a("img",{staticClass:"logo",attrs:{src:"/static/img/icon-144.png"}}),t._v(" "),t._m(0,!1,!1),t._v(" "),a("div",{staticClass:"login_input"},[a("el-input",{attrs:{placeholder:"请输入内容",size:"large"},model:{value:t.user,callback:function(e){t.user=e},expression:"user"}},[a("template",{slot:"prepend"},[t._v("账号：")])],2)],1),t._v(" "),a("div",{staticClass:"login_input"},[a("el-input",{attrs:{type:"password",placeholder:"请输入内容",size:"large"},model:{value:t.pw,callback:function(e){t.pw=e},expression:"pw"}},[a("template",{slot:"prepend"},[t._v("密码：")])],2)],1),t._v(" "),a("div",{staticClass:"login_input"},[a("el-button",{attrs:{type:"primary",size:"large"},on:{click:function(e){t.login()}}},[t._v("登    录")])],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"login_tips"},[this._v("MusicFM"),e("br"),this._v("Operations Management System")])}]},M=a("VU/8")(T,z,!1,function(t){a("DzBd")},"data-v-236cc704",null).exports;l.default.use(o.a);var F=new o.a({routes:[{path:"/",redirect:"/login"},{path:"/login",component:M},{path:"/recommend",component:p},{path:"/latest",component:v},{path:"/ranking",component:h},{path:"/allList",component:S},{path:"/mfm_track",component:x},{path:"/search_keywords",component:V},{path:"/HotSinger",component:L},{path:"/app_info",component:N}]}),H=a("zL8q"),B=a.n(H);a("tvR6");l.default.use(B.a),l.default.config.debug=!0,new l.default({el:"#app",router:F,template:"<App/>",components:{App:n}})},"Vfz+":function(t,e){},X2Oc:function(t,e){Date.prototype.Format=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var a in e)new RegExp("("+a+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[a]:("00"+e[a]).substr((""+e[a]).length)));return t}},tvR6:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.78ce56673345b1860cd2.js.map